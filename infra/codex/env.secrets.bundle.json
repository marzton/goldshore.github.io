{
  "meta": {
    "project": "goldshore-github-io",
    "version": "2025.11.03",
    "description": "Generation/source instructions for every empty value in env.secrets.bundle.json",
    "bundle_path": "infra/codex/env.secrets.bundle.json"
  },
  "cloudflare": {
    "CLOUDFLARE_ACCOUNT_ID": {
      "value": "${CLOUDFLARE_ACCOUNT_ID}",
      "source": "Cloudflare Dashboard",
      "url": "https://dash.cloudflare.com/profile",
      "path": "Profile → Account ID",
      "notes": "Static per account."
    },
    "CLOUDFLARE_API_TOKEN": {
      "value": "${CLOUDFLARE_API_TOKEN}",
      "source": "Cloudflare Dashboard",
      "url": "https://dash.cloudflare.com/profile/api-tokens",
      "path": "API Tokens → Create token",
      "scopes": [
        "Workers Scripts:Edit",
        "Workers KV Storage:Edit",
        "Pages:Edit",
        "Queues:Edit",
        "Account Settings:Read",
        "Zone:Read",
        "Zone:DNS:Edit",
        "Access:Edit"
      ],
      "notes": "Create one reusable token for CI/sync."
    },
    "CLOUDFLARE_JWKS_URI": {
      "value": "https://goldshore.cloudflareaccess.com/cdn-cgi/access/certs",
      "notes": "Public JWKS for Access JWT verification."
    },
    "ACCESS_AUDIENCE": {
      "value": "3ae67260bc738a42d4eeaf1525fd4941bf220375e5325c2cb76dbe653a2f8c25",
      "notes": "From Zero Trust → Access → Application → Audience (AUD)."
    },
    "CF_PAGES_PROJECT_WEB": {
      "value": "goldshore-web",
      "notes": "Pages project name for public site."
    },
    "CF_PAGES_PROJECT_ADMIN": {
      "value": "goldshore-admin",
      "notes": "Pages project name for admin."
    }
  },
  "cloudflare_access": {
    "CF_ACCESS_CLIENT_ID": {
      "value": "${CF_ACCESS_CLIENT_ID}",
      "source": "Cloudflare Zero Trust",
      "url": "https://dash.cloudflare.com/?to=/:account/access/service-tokens",
      "path": "Zero Trust → Access → Service tokens → Create",
      "notes": "Use for headless agent/CI calls to protected API."
    },
    "CF_ACCESS_CLIENT_SECRET": {
      "value": "${CF_ACCESS_CLIENT_SECRET}",
      "source": "Cloudflare Zero Trust",
      "url": "https://dash.cloudflare.com/?to=/:account/access/service-tokens",
      "path": "Zero Trust → Access → Service tokens → Create",
      "notes": "Copy on creation; not shown again."
    },
    "POLICIES.bypass_webhook": {
      "value": "/webhook/github",
      "notes": "Add a BYPASS policy for this path on api.goldshore.org."
    },
    "POLICIES.protected_paths": {
      "value": [
        "/admin",
        "/ai",
        "/oauth"
      ],
      "notes": "All other sensitive paths require Access JWT (AUD check)."
    }
  },
  "github_app": {
    "APP_SLUG": {
      "value": "gold-shore-deployer"
    },
    "GH_APP_ID": {
      "value": "${GH_APP_ID}",
      "source": "GitHub App settings",
      "url": "https://github.com/settings/apps/gold-shore-deployer",
      "path": "App ID",
      "notes": "Numeric."
    },
    "GH_INSTALLATION_ID": {
      "value": "${GH_INSTALLATION_ID}",
      "source": "Installations page",
      "url": "https://github.com/organizations/goldshore/settings/installations",
      "path": "gold-shore-deployer → URL contains /installations/{id}",
      "notes": "Numeric; org installation."
    },
    "GH_APP_PRIVATE_KEY": {
      "value": "${GH_APP_PRIVATE_KEY}",
      "source": "GitHub App settings",
      "url": "https://github.com/settings/apps/gold-shore-deployer",
      "path": "Generate a new private key",
      "format": "PEM",
      "notes": "Paste full PEM, including BEGIN/END lines."
    },
    "GH_WEBHOOK_SECRET": {
      "value": "${GH_WEBHOOK_SECRET}",
      "source": "Local generation",
      "cli": [
        "node -e \"console.log(require('crypto').randomBytes(48).toString('base64url'))\"",
        "openssl rand -base64 48 | tr '+/' '-_' | tr -d '='"
      ],
      "notes": "Set same value in GitHub App Webhook secret field."
    },
    "webhook_url": {
      "value": "https://api.goldshore.org/webhook/github"
    },
    "setup_url": {
      "value": "https://admin.goldshore.org/setup/github"
    },
    "oauth_callback_url": {
      "value": "https://api.goldshore.org/oauth/github/callback",
      "notes": "Only used if you enable user OAuth on the App."
    },
    "request_user_oauth_during_install": {
      "value": false
    },
    "device_flow_enabled": {
      "value": false
    }
  },
  "github_oauth": {
    "GITHUB_CLIENT_ID": {
      "value": "${GITHUB_CLIENT_ID}",
      "source": "GitHub → Developer settings → OAuth Apps",
      "url": "https://github.com/settings/developers",
      "path": "OAuth Apps → New OAuth App → Client ID"
    },
    "GITHUB_CLIENT_SECRET": {
      "value": "${GITHUB_CLIENT_SECRET}",
      "source": "GitHub → Developer settings → OAuth Apps",
      "url": "https://github.com/settings/developers",
      "path": "OAuth Apps → Generate a new client secret"
    },
    "GITHUB_OAUTH_REDIRECT_URI": {
      "value": "https://api.goldshore.org/oauth/github/callback",
      "notes": "Must EXACTLY match the OAuth App settings."
    },
    "SCOPES": {
      "value": "read:user,user:email"
    }
  },
  "google": {
    "GOOGLE_CLIENT_ID": {
      "value": "${GOOGLE_CLIENT_ID}",
      "source": "Google Cloud Console",
      "url": "https://console.cloud.google.com/apis/credentials",
      "path": "APIs & Services → Credentials → Create Credentials → OAuth Client ID"
    },
    "GOOGLE_CLIENT_SECRET": {
      "value": "${GOOGLE_CLIENT_SECRET}",
      "source": "Google Cloud Console",
      "url": "https://console.cloud.google.com/apis/credentials",
      "path": "OAuth client → Download JSON or copy Secret"
    },
    "GS_DRIVE_FOLDER_ID": {
      "value": "${GS_DRIVE_FOLDER_ID}",
      "source": "Google Drive",
      "notes": "The ID of the Google Drive folder to sync with /packages/refs"
    },
    "GOOGLE_APPLICATION_CREDENTIALS": {
      "value": "${GOOGLE_APPLICATION_CREDENTIALS}",
      "source": "Google Cloud Console",
      "url": "https://console.cloud.google.com/iam-admin/serviceaccounts",
      "path": "IAM & Admin → Service Accounts",
      "notes": "The path to the Google Cloud service account credentials file."
    },
    "GA_MEASUREMENT_ID": {
      "value": "${GA_MEASUREMENT_ID}",
      "source": "Google Analytics 4",
      "url": "https://analytics.google.com",
      "path": "Admin → Data streams → Web → Measurement ID (G-XXXX)"
    }
  },
  "ai_providers": {
    "OPENAI_API_KEY": {
      "value": "${OPENAI_API_KEY}",
      "source": "OpenAI",
      "url": "https://platform.openai.com/account/api-keys"
    },
    "ANTHROPIC_API_KEY": {
      "value": "${ANTHROPIC_API_KEY}",
      "source": "Anthropic",
      "url": "https://console.anthropic.com/settings/keys"
    },
    "GOOGLE_GEMINI_API_KEY": {
      "value": "${GOOGLE_GEMINI_API_KEY}",
      "source": "Google AI Studio",
      "url": "https://makersuite.google.com/app/apikey"
    },
    "GROQ_API_KEY": {
      "value": "${GROQ_API_KEY}",
      "source": "Groq",
      "url": "https://console.groq.com/keys"
    },
    "MODEL_POLICY": {
      "value": "balanced_v1"
    },
    "MODEL_REGISTRY_PATH": {
      "value": "infra/codex/ai.models.json"
    }
  },
  "observability": {
    "SENTRY_DSN": { "value": "${SENTRY_DSN}", "source": "Sentry", "url": "https://sentry.io/settings/projects/", "path": "Project → Client Keys (DSN)" },
    "OTEL_EXPORTER_OTLP_ENDPOINT": {
      "value": "${OTEL_EXPORTER_OTLP_ENDPOINT}",
      "source": "Your APM/Collector",
      "examples": ["https://otlp.nr-data.net", "https://ingest.lightstep.com:443", "http(s)://<your-otel-collector>:4317"]
    },
    "POSTHOG_KEY": { "value": "${POSTHOG_KEY}", "source": "PostHog", "url": "https://app.posthog.com", "path": "Project settings → Project API Key" }
  },
  "payments": {
    "STRIPE_SECRET_KEY": {
      "value": "${STRIPE_SECRET_KEY}",
      "source": "Stripe Dashboard",
      "url": "https://dashboard.stripe.com/apikeys",
      "notes": "Starts with sk_live_ for production."
    },
    "STRIPE_WEBHOOK_SECRET": {
      "value": "${STRIPE_WEBHOOK_SECRET}",
      "source": "Stripe Dashboard/CLI",
      "url": "https://dashboard.stripe.com/webhooks",
      "cli": [
        "stripe listen --forward-to localhost:8787/stripe/webhook"
      ],
      "notes": "Copy Signing secret for your endpoint."
    },
    "PAYPAL_CLIENT_ID": {
      "value": "${PAYPAL_CLIENT_ID}",
      "source": "PayPal Developer",
      "url": "https://developer.paypal.com/dashboard/applications"
    },
    "PAYPAL_CLIENT_SECRET": {
      "value": "${PAYPAL_CLIENT_SECRET}",
      "source": "PayPal Developer",
      "url": "https://developer.paypal.com/dashboard/applications"
    }
  },
  "email": {
    "RESEND_API_KEY": {
      "value": "${RESEND_API_KEY}",
      "source": "Resend",
      "url": "https://resend.com/dashboard/api-keys"
    },
    "EMAIL_FROM": {
      "value": "${EMAIL_FROM}",
      "example": "GoldShore <no-reply@goldshore.org>",
      "notes": "Verify domain (SPF/DKIM) with your email provider/DNS."
    }
  },
  "wrangler_bindings": {
    "kv.CONFIG_KV.id": {
      "value": "${CONFIG_KV_ID}",
      "source": "Workers KV",
      "url": "https://dash.cloudflare.com/?to=/:account/workers/kv/namespaces",
      "cli": [
        "wrangler kv:namespace create CONFIG_KV --env production"
      ],
      "notes": "Paste the Namespace ID."
    },
    "kv.SESSIONS_KV.id": {
      "value": "${SESSIONS_KV_ID}",
      "source": "Workers KV",
      "url": "https://dash.cloudflare.com/?to=/:account/workers/kv/namespaces",
      "cli": [
        "wrangler kv:namespace create SESSIONS_KV --env production"
      ]
    },
    "d1.DB.database_id": {
      "value": "${DB_DATABASE_ID}",
      "source": "Cloudflare D1",
      "url": "https://dash.cloudflare.com/?to=/:account/workers/d1/databases",
      "cli": [
        "wrangler d1 create goldshore-db"
      ]
    },
    "r2.ASSETS_BUCKET.bucket_name": {
      "value": "${ASSETS_BUCKET_NAME}",
      "source": "Cloudflare R2",
      "url": "https://dash.cloudflare.com/?to=/:account/r2",
      "cli": [
        "wrangler r2 bucket create goldshore-assets"
      ],
      "notes": "Use the exact bucket name."
    },
    "queues.TASKS_QUEUE.queue": {
      "value": "${TASKS_QUEUE_NAME}",
      "source": "Cloudflare Queues",
      "url": "https://dash.cloudflare.com/?to=/:account/queues",
      "cli": [
        "wrangler queues create goldshore-tasks"
      ]
    }
  },
  "security": {
    "SESSION_SECRET": {
      "value": "${SESSION_SECRET}",
      "source": "Local generation",
      "cli": [
        "node -e \"console.log(require('crypto').randomBytes(48).toString('base64url'))\"",
        "openssl rand -base64 48 | tr '+/' '-_' | tr -d '='"
      ],
      "notes": "≥48 bytes before encoding."
    },
    "HMAC_SECRET": {
      "value": "${HMAC_SECRET}",
      "source": "Local generation",
      "cli": [
        "openssl rand -hex 32"
      ],
      "notes": "For internal signatures (non-GitHub)."
    },
    "GPT_SHARED_SECRET": { "value": "${GPT_SHARED_SECRET}", "source": "Local generation", "cli": "openssl rand -hex 32" },
    "GPT_ALLOWED_ORIGINS": { "value": "${GPT_ALLOWED_ORIGINS}", "notes": "e.g., https://goldshore.org,http://localhost:5173" }
  },
  "codex_agent": {
    "CODEX_SYNC_SINCE": {
      "value": "2025-11-03T00:00:00Z",
      "notes": "Move forward-only after each successful sync."
    },
    "GITHUB_GRAPHQL_PAGE_SIZE": {
      "value": 50
    },
    "CODEX_SYNC_INTERVAL_MINUTES": {
      "value": 30
    },
    "CODEX_MAX_PARALLEL_REQUESTS": {
      "value": 5
    },
    "GITHUB_TOKEN": {
      "value": "${GITHUB_TOKEN}",
      "source": "GitHub Settings",
      "url": "https://github.com/settings/tokens",
      "scopes": [
        "repo",
        "workflow",
        "admin:org:read"
      ],
      "notes": "Use fine-grained PAT if preferred."
    },
    "ENABLE_SLOW_MODE": {
      "value": true
    }
  },
  "routing_services": {
    "webhook_path": {
      "value": "/webhook/github"
    },
    "oauth_callback_path": {
      "value": "/oauth/github/callback"
    },
    "setup_path": {
      "value": "/setup/github"
    }
  },
  "turnstile": {
    "PUBLIC_TURNSTILE_SITE_KEY": { "value": "${PUBLIC_TURNSTILE_SITE_KEY}", "source": "Cloudflare Turnstile", "url": "https://dash.cloudflare.com/?to=/:account/turnstile" },
    "TURNSTILE_SECRET_KEY": { "value": "${TURNSTILE_SECRET_KEY}", "source": "Cloudflare Turnstile", "url": "https://dash.cloudflare.com/?to=/:account/turnstile" }
  },
  "misc": {
    "FORMSPREE_ENDPOINT": { "value": "${FORMSPREE_ENDPOINT}", "source": "Formspree", "url": "https://formspree.io/forms" }
  },
  "validation": {
    "required_keys": [
      "cloudflare.CLOUDFLARE_ACCOUNT_ID",
      "cloudflare.CLOUDFLARE_API_TOKEN",
      "cloudflare_access.CF_ACCESS_CLIENT_ID",
      "cloudflare_access.CF_ACCESS_CLIENT_SECRET",
      "github_app.GH_APP_ID",
      "github_app.GH_INSTALLATION_ID",
      "github_app.GH_APP_PRIVATE_KEY",
      "github_app.GH_WEBHOOK_SECRET",
      "wrangler_bindings.kv.CONFIG_KV.id",
      "wrangler_bindings.kv.SESSIONS_KV.id"
    ],
    "post_fill_commands": [
      "pnpm env:check",
      "pnpm sync:cf",
      "pnpm sync:gh",
      "cd apps/api && npx wrangler deploy"
    ]
  }
}
