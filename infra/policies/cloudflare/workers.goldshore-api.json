{
  "script": "goldshore-api",
  "description": "Primary API Worker powering authenticated trading and CRM endpoints.",
  "compatibility_date": "2025-10-20",
  "environments": {
    "production": {
      "routes": [
        "api.goldshore.org/*"
      ],
      "vars": {
        "CORS_ORIGINS": "https://goldshore.org,https://admin.goldshore.org"
      },
      "d1_databases": [
        {
          "binding": "DB",
          "database": "goldshore_db"
        }
      ],
      "kv_namespaces": [
        {
          "binding": "AGENT_PROMPT_KV",
          "id": "${AGENT_PROMPT_KV_ID}"
        }
      ],
      "r2_buckets": [
        {
          "binding": "SNAP_R2",
          "bucket_name": "goldshore-bucket"
        }
      ],
      "queues": {
        "producers": [
          {
            "binding": "JOBS_QUEUE",
            "queue": "jobs"
          }
        ],
        "consumers": [
          {
            "queue": "jobs",
            "max_batch_size": 10,
            "max_batch_timeout": 5,
            "max_retries": 3
          }
        ]
      }
    },
    "preview": {
      "routes": [
        "api-preview.goldshore.org/*"
      ],
      "vars": {
        "CORS_ORIGINS": "https://preview.goldshore.org"
      }
    },
    "development": {
      "routes": [
        "api-dev.goldshore.org/*"
      ],
      "vars": {
        "CORS_ORIGINS": "http://localhost:8787"
      }
    }
  },
  "logpush": {
    "dataset": "http_requests",
    "destination": "r2://goldshore-logs/api/${DATE}.json"
  }
}
