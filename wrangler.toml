# Cloudflare Pages configuration. Worker deployments should use wrangler.worker.toml.
pages_build_output_dir = "./apps/web/dist"
pages_build_command = "npm run build:web"

name = "goldshore"
main = "apps/api-router/src/router.ts"
compatibility_date = "2025-10-05"
workers_dev = false

[vars]
APP_NAME = "GoldShore"
PRODUCTION_ASSETS = "https://goldshore-org.pages.dev"
PREVIEW_ASSETS = "https://goldshore-org-preview.pages.dev"
DEV_ASSETS = "https://goldshore-org-dev.pages.dev"
GPT_ALLOWED_ORIGINS = "https://goldshore.org, https://www.goldshore.org, https://preview.goldshore.org, https://dev.goldshore.org, https://goldshore.foundation, https://www.goldshore.foundation, https://goldshorefoundation.org, https://www.goldshorefoundation.org, https://fortune-fund.com, https://www.fortune-fund.com, https://fortune-fund.games, https://www.fortune-fund.games, https://trade.goldshore.org"

# Secrets such as FORMSPREE_ENDPOINT, TURNSTILE_SECRET, OPENAI_API_KEY, and
# GPT_SHARED_SECRET (or legacy GPT_PROXY_SECRET) are provided via
# `wrangler secret put â€¦` or `.dev.vars` in local development.

[env.production]
name = "goldshore-production"
routes = [
  { pattern = "goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "www.goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "admin.goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "api.goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "web.goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "www.goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "admin.goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "api.goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "web.goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "www.goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "admin.goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "api.goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "web.goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "www.fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "admin.fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "api.fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "web.fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "fortune-fund.games/*", zone_name = "fortune-fund.games" },
  { pattern = "www.fortune-fund.games/*", zone_name = "fortune-fund.games" },
  { pattern = "admin.fortune-fund.games/*", zone_name = "fortune-fund.games" },
  { pattern = "api.fortune-fund.games/*", zone_name = "fortune-fund.games" },
  { pattern = "web.fortune-fund.games/*", zone_name = "fortune-fund.games" }
  { pattern = "goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "www.goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "www.goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "www.fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "fortune-fund.games/*", zone_name = "fortune-fund.games" },
  { pattern = "www.fortune-fund.games/*", zone_name = "fortune-fund.games" }
]

[env.production.vars]
ASSETS_ORIGIN = "https://goldshore.org"
CF_ACCESS_AUD = "3d5916af31a595ca00d8b1ab0157361a953779d939d9df2f63b1802b87a0248e"
CF_ACCESS_ISS = "https://rmarston.cloudflareaccess.com"
CF_ACCESS_JWKS_URL = "https://rmarston.cloudflareaccess.com/cdn-cgi/access/certs"

[env.preview]
name = "goldshore-preview"
routes = [
  { pattern = "goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "fortune-fund.games/*", zone_name = "fortune-fund.games" },
  { pattern = "preview.goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "preview.goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "preview.goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "preview.fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "preview.fortune-fund.games/*", zone_name = "fortune-fund.games" }
]

[[analytics_engine_datasets]]
binding = "GOLD_ANALYTICS"
dataset = "goldshore-events"

[env.dev]
name = "goldshore-dev"
routes = [
  { pattern = "dev.goldshore.org/*", zone_name = "goldshore.org" },
  { pattern = "dev.goldshore.foundation/*", zone_name = "goldshore.foundation" },
  { pattern = "dev.goldshorefoundation.org/*", zone_name = "goldshorefoundation.org" },
  { pattern = "dev.fortune-fund.com/*", zone_name = "fortune-fund.com" },
  { pattern = "dev.fortune-fund.games/*", zone_name = "fortune-fund.games" }
]
