---
import BaseLayout from "../layouts/Base.astro";

const meta = {
  title: "Contact Gold Shore — Book a strategy session",
  description: "Request a working session with Gold Shore to plan your launch, narrative defense, or growth initiative.",
  canonical: "https://goldshore.org/contact"
};

const turnstileSiteKey = import.meta.env.PUBLIC_TURNSTILE_SITE_KEY;
---
<BaseLayout {...meta}>
  <h1 class="section-title">Let’s build momentum</h1>
  <p class="section-subtitle">
    Share your focus area and timeline. We’ll align on scope within one business day and route you to the right operator.
  </p>

  <form
    class="card"
    action="/api/contact"
    method="POST"
    style="display: grid; gap: 20px;"
  >
    <input type="hidden" name="_redirect" value="/contact#contact-success" />
    <div>
      <label for="name">Name</label>
      <input id="name" name="name" type="text" required placeholder="Ada Lovelace" style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.2); background: rgba(10,15,26,.6); color: var(--fg);" />
    </div>
    <div>
      <label for="email">Email</label>
      <input id="email" name="email" type="email" required placeholder="you@example.com" style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.2); background: rgba(10,15,26,.6); color: var(--fg);" />
    </div>
    <div>
      <label for="focus">What do you need?</label>
      <select id="focus" name="focus" required style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.2); background: rgba(10,15,26,.6); color: var(--fg);">
        <option value="">Select a track</option>
        <option>Launch architecture</option>
        <option>Reputation defense</option>
        <option>Intelligence ops</option>
        <option>Other</option>
      </select>
    </div>
    <div>
      <label for="message">Context</label>
      <textarea id="message" name="message" rows="5" required placeholder="Tell us about the product, timeline, and any material we should review." style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.2); background: rgba(10,15,26,.6); color: var(--fg);"></textarea>
    </div>
    {turnstileSiteKey && (
      <div style="display: flex; justify-content: center;">
        <div class="cf-turnstile" data-sitekey={turnstileSiteKey} data-theme="dark"></div>
      </div>
    )}
    <button class="btn" type="submit">Submit request</button>
  </form>

  <div id="contact-success" class="card" style="margin-top: 24px; display: none; background: rgba(0, 64, 32, 0.35); color: #c9f7d4;">
    <p style="margin: 0;">Thanks for the note—we’ll reach out within one business day.</p>
  </div>

  {turnstileSiteKey && (
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
  )}
  <script>
    if (typeof window !== 'undefined' && window.location.hash === '#contact-success') {
      const success = document.getElementById('contact-success');
      if (success) {
        success.style.display = 'block';
      }
    }
  </script>

  <section style="margin-top: clamp(48px, 8vw, 96px);">
    <h2 class="section-title">Availability</h2>
    <p class="section-subtitle">We host strategy calls on Tuesdays and Thursdays. Urgent reputation work is on-call 24/7.</p>
    <div class="card">
      <p style="margin: 0;">Prefer async? Email <a href="mailto:intake@goldshore.org">intake@goldshore.org</a> with decks, briefs, or data rooms.</p>
    </div>
  </section>
</BaseLayout>
