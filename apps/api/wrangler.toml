name = "goldshore-api"
main = "src/index.ts"
compatibility_date = "2024-11-20"

[build]
command = "npm run build"

[[kv_namespaces]]
binding = "CONFIG_KV"
id = "00000000000000000000000000000002"
preview_id = "dev-config-kv"

[vars]
CORS_ORIGINS = "https://goldshore.org,https://www.goldshore.org,https://admin.goldshore.org,https://preview.goldshore.org,http://localhost:8787"
ENV_BUNDLE_JSON = """
{
  "cloudflare": {
    "access_applications": [
      {
        "name": "Goldshore Admin",
        "domain": "admin.goldshore.org",
        "aud": "goldshore-admin",
        "session_duration": "720h",
        "policies": [
          {
            "name": "Goldshore Admin Access",
            "precedence": 1,
            "decision": "allow",
            "include": [
              { "email_domain": "goldshore.org" }
            ],
            "require": [
              { "email_domain": "goldshore.org" }
            ]
          }
        ]
      }
    ],
    "pages": [
      {
        "project": "goldshore-web",
        "environments": {
          "production": {
            "env_vars": {
              "NODE_VERSION": "20",
              "WORKER_HOSTNAME": "goldshore.org"
            }
          },
          "preview": {
            "env_vars": {
              "WORKER_HOSTNAME": "preview.goldshore.org"
            }
          }
        }
      }
    ],
    "worker_routes": [
      {
        "script": "goldshore-api",
        "routes": [
          "api.goldshore.org/*",
          "api-preview.goldshore.org/*"
        ]
      }
    ],
    "dns_records": [
      {
        "type": "CNAME",
        "name": "www",
        "content": "goldshore.org",
        "proxied": true
      }
    ]
  }
}
"""
GH_WEBHOOK_SECRET = "set-me"
CLOUDFLARE_API_TOKEN = "set-me"
CLOUDFLARE_ACCOUNT_ID = "set-me"
CLOUDFLARE_ZONE_ID = "set-me"
GITHUB_DEFAULT_BRANCH = "main"

[env.development]
name = "goldshore-api-dev"

[env.development.vars]
CORS_ORIGINS = "http://localhost:8787,http://localhost:3000"
ENV_BUNDLE_JSON = """
{
  "cloudflare": {
    "access_applications": [],
    "pages": [],
    "worker_routes": [],
    "dns_records": []
  }
}
"""
GH_WEBHOOK_SECRET = "dev-secret"
CLOUDFLARE_API_TOKEN = "dev-token"
CLOUDFLARE_ACCOUNT_ID = "dev-account"
CLOUDFLARE_ZONE_ID = "dev-zone"
GITHUB_DEFAULT_BRANCH = "main"
