name = "goldshore-gateway"
main = "src/index.ts"
compatibility_date = "2025-10-05"
workers_dev = true

[vars]
CF_TEAM_DOMAIN = "goldshore"
API_ENVIRONMENT = "dev"
DB_NAME = "goldshore-db"
KV_NAME = "goldshore-gateway-kv"
AI_MODEL = "gpt-4o"
GOLD_SHORE_VERSION = "0.1.0"

# ======================================================================================
# PRODUCTION ENVIRONMENT
# ======================================================================================
[env.production]
name = "goldshore-gateway-prod"
routes = ["gateway.goldshore.org/*"]

[[env.production.kv_namespaces]]
binding = "STORE"
id = "xxxx-prod-gateway-kv-id"

[[env.production.r2_buckets]]
binding = "ASSETS"
bucket_name = "goldshore-assets-prod"

[[env.production.d1_databases]]
binding = "DB"
database_name = "goldshore-db-prod"
database_id = "xxxx-prod-db-id"

[[env.production.ai]]
binding = "AI"

[[env.production.services]]
binding = "api"
service = "goldshore-api-prod"

[env.production.vars]
API_ENVIRONMENT = "production"

# ======================================================================================
# PREVIEW ENVIRONMENT
# ======================================================================================
[env.preview]
name = "goldshore-gateway-preview"
routes = ["gateway-preview.goldshore.org/*"]

[[env.preview.kv_namespaces]]
binding = "STORE"
id = "xxxx-preview-gateway-kv-id"

[[env.preview.r2_buckets]]
binding = "ASSETS"
bucket_name = "goldshore-assets-preview"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "goldshore-db-preview"
database_id = "xxxx-preview-db-id"

[[env.preview.ai]]
binding = "AI"

[[env.preview.services]]
binding = "api"
service = "goldshore-api-preview"

[env.preview.vars]
API_ENVIRONMENT = "preview"
